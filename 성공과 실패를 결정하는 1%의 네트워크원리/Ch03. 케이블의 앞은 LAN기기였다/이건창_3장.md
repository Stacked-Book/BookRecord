# 케이블의 앞은 LAN 기기였다.

케이블에 송출한 패킷이 리피터 허브, 스위칭 허브, 라우터 등의 네트워크 기기를 경유하여 인터넷을 향해 진행한다. LAN 어댑터가 송신한 패킷은 스위칭 허브 등을 경유하여 인터넷 접속용 라우터에 도착한다. 라우터의 앞부분은 인터넷이므로 통신사(프로바이더, provider)가 패킷을 상대에게 운반한다.

1. 케이블과 리피터, 허브 속을 신호가 흘러간다.
    
    요약
    
    - 대부분의 패킷은 클라이언트 PC에서 송신해서 리피터 허브, 스위칭 허브 그리고 라우터를 경유해 인터넷으로 나가게 된다.
    - 이더넷의 신호의 실체는 전압으로 LAN 어댑터의 PHY(MAU) 회로의 단자에서 신호가 나온다.
    - 송출한 신호는 그대로의 모습으로 허브에 도착하지 않고 변형되어 도착한다. 전기신호의 성질때문에 신호는 단지 약해지기만 한 것이 아니라 뭉개져서 도착하게 된다.
    - LAN 케이블로 사용하는 트위스트 페어 케이블(꼰 선쌍)에는 이러한 잡음의 영향을 억제하기 위해 케이블을 꼰다. 꼰 쌍이라는 말은 두 신호선을 한 조로 하여 마주 꼬아서 잡음을 막을 수 있다. (이 방법외에도 여러 가지 대체 방법이 존재한다.)
    - 리피터 허브는 연결된 케이블 전부에 신호를 송신한다. 신호는 모든 커넥터에서 나가면서 리피터 허브에 접속한 전체 기기에 도달한다. 그리고 신호를 수신한 기기는 맨 앞에 있는 MAC 헤더에 쓰인 수신처 MAC 주소를 조사해 자신이 수신처에 해당하면 신호를 수신하고, 해당하지 않으면 수신한 신호를 무시한다.
    
    내용
    
    - [케이블과 리피터, 허브 속을 신호가 흘러간다.](https://www.notion.so/0227f36d2a734483ba18446b72d83aa3)
    
2. 스위칭 허브의 패킷 중계 동작
    
    요약
    
    - 스위칭 허브는 신호를 흘리지 않고 패킷의 신호를 수신하여 디지털 데이터의 형태로 되돌려 주고, 다시 신호로 고쳐 송신하는 동작을 통해 패킷을 운반한다.
    - 스위칭 허브는 이더넷의 패킷을 그대로 목적지를 향해 중계하도록 만들어져 있다.
    - 스위치 회로 구조는 전자 회로로 만들어 졌고, 입력 포트와 출력 포트를 연결할 수 있다. 그리고 신호선이 격자 모양으로 배치되고, 교점에 스위치가 있다. 스위치는 전자적으로 개폐를 제어할 수 있고, 전자적 개폐를 통해 신호가 흐르는 대상을 제어한다.
    - 스위칭 회로의 MAC 주소표의 내용은 스위칭 허브 자체가 스스로 등록하거나 삭제하므로 수동으로 동록 및 삭제할 필요가 없다. 또한 MAC 주소표의 내용이 이상해진 경우에도 기기를 리셋하여 MAC 주소표의 내용을 전부 지워버리면 이때부터 새롭게 주소가 등록되므로 수동 갱신할 필요가 없다.
    
    내용
    
    - [스위칭 허브의 패킷 중계 동작](https://www.notion.so/d955105ef3904792b7784ce1967ac6a6)
    
3. 라우터의 패킷 중계 동작
    
    요약
    
    - 라우터는 중계 부분과 포트 부분으로 구성되어 있다. 중계 부분은 중계 대상을 등록한 경로표(IP)를 통해 패킷의 중계 대상을 판단하는 동작을 담당한다.
    - 통신 상대까지 패킷을 전달하는 전체 동작은 IP가 담당하고, 다음 라우터까지 패킷을 운반하는 부분은 이더넷이 담당하게 된다. 덕분에 무선 LAN과 이더넷을 치환해도 라우터는 동작할 수 있게 된다. 이렇게 다음 라우터까지 스스로 패킷을 운반하지 않고 다양한 통신 기술에 의뢰해 패킷을 운반한다.
    - **다양한 통신기술을 적재적소에 구분해 사용할 수 있다는 IP의 큰 특징이다. 이 특징 덕분에 인터넷과 같은 거대한 네트워크를 만들 수 있었던 것이다.**
    
    내용
    
    - [라우터의 패킷 중계 동작](https://www.notion.so/8862adadbfd3459f860b1c8ec1476033)
    
4. 라우터의 부가 기능
    
    요약
    
    - 라우터는 기본 동작과 더불어 주소 변환 기능과 패킹 필터링 기능을 가지고 있다.
    - 주소 변환은 주소 부족에 대처하기 위한 방법이고, 프라이비트 주소(private address)를 이용해 글로벌 주소(global address)를 효율적으로 사용한다.
    - 패킷을 송수신할 때는 주소 변환에 존재하는 대응표에서 프라이비트 주소와 글로벌 주소의 대응 관계를 조사해 주소와 포트 번호를 바꿔쓰고 나서 패킷을 중계한다.
    - 인터넷에서 사내로 패킷을 중계할 때는 대응표에 등록되어 있지 않으면 중계할 수 없다. 즉 인터넷에서 액세스하지 않는 기기에는 인터넷 측에서 패킷을 송신할 수 없다. 이 방식은 부정 침입을 방지하는 효과를 가지고 있다.
    - 패킷 필터링은 패킷을 중계할 때, MAC 헤더, IP 헤더, TCP 헤더에 기록되어 있는 내용을 조사해 사전에 설정한 조건에 합치되면 패킷을 중계하거나 폐기하는 동작을 실행한다.
    
    내용
    
    - [라우터의 부가 기능](https://www.notion.so/e2b5b8e8be6d488f80463c92c06aee95)
